<Window x:Class="MeshhessenClient.TileDownloaderWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ui="http://schemas.modernwpf.com/2019"
        ui:WindowHelper.UseModernWindowStyle="True"
        Title="Karten-Tiles herunterladen"
        Width="450"
        Height="700"
        ResizeMode="NoResize"
        WindowStartupLocation="CenterOwner">
    <StackPanel Margin="20">
        <!-- Dokumentation -->
        <TextBlock TextWrapping="Wrap" Margin="0,0,0,15" FontSize="11" Foreground="Gray">
            <Run Text="Tiles werden lokal gespeichert und funktionieren offline. "/><LineBreak/>
            <Run Text="Du kannst mehrere Regionen nacheinander herunterladen (z.B. erst Hessen, dann Bayern). "/><LineBreak/>
            <Run Text="Höhere Zoom-Stufen (12+) benötigen viele Tiles. Beispiel: Hessen Zoom 1-12 ≈ 25.000 Tiles."/><LineBreak/>
            <Run Text="Respektiere bitte die OSM-Nutzungsbedingungen (max ~2 Anfragen/Sekunde)."/>
        </TextBlock>

        <!-- Kartenquelle -->
        <TextBlock Text="Kartenquelle:" FontWeight="Bold" FontSize="12" Margin="0,0,0,4"/>
        <ComboBox x:Name="MapSourceComboBox"
                 Margin="0,0,0,14">
            <ComboBoxItem Content="OpenStreetMap Standard" Tag="osm"/>
            <ComboBoxItem Content="OpenTopoMap" Tag="osmtopo"/>
            <ComboBoxItem Content="OpenStreetMap Dark" Tag="osmdark"/>
        </ComboBox>

        <!-- Bundesland Auswahl -->
        <TextBlock Text="Bundesland wählen (optional):" FontWeight="Bold" FontSize="12" Margin="0,0,0,4"/>
        <ComboBox x:Name="BundeslandComboBox"
                 SelectionChanged="BundeslandComboBox_SelectionChanged"
                 Margin="0,0,0,14">
            <ComboBoxItem Content="(Manuelle Eingabe)" Tag=""/>
            <ComboBoxItem Content="Baden-Württemberg" Tag="49.8,47.5,10.5,7.5"/>
            <ComboBoxItem Content="Bayern" Tag="50.6,47.3,13.8,8.9"/>
            <ComboBoxItem Content="Berlin" Tag="52.7,52.3,13.8,13.1"/>
            <ComboBoxItem Content="Brandenburg" Tag="53.6,51.4,14.8,11.3"/>
            <ComboBoxItem Content="Bremen" Tag="53.6,53.0,8.9,8.5"/>
            <ComboBoxItem Content="Hamburg" Tag="53.8,53.4,10.3,9.7"/>
            <ComboBoxItem Content="Hessen" Tag="51.7,49.4,10.3,7.8"/>
            <ComboBoxItem Content="Mecklenburg-Vorpommern" Tag="54.7,53.1,14.4,10.6"/>
            <ComboBoxItem Content="Niedersachsen" Tag="53.9,51.3,11.6,6.7"/>
            <ComboBoxItem Content="Nordrhein-Westfalen" Tag="52.5,50.3,9.5,5.9"/>
            <ComboBoxItem Content="Rheinland-Pfalz" Tag="50.9,48.9,8.5,6.1"/>
            <ComboBoxItem Content="Saarland" Tag="49.6,49.1,7.4,6.4"/>
            <ComboBoxItem Content="Sachsen" Tag="51.7,50.2,15.0,11.9"/>
            <ComboBoxItem Content="Sachsen-Anhalt" Tag="53.0,50.9,13.2,10.6"/>
            <ComboBoxItem Content="Schleswig-Holstein" Tag="55.1,53.4,11.3,8.4"/>
            <ComboBoxItem Content="Thüringen" Tag="51.6,50.2,12.7,9.9"/>
        </ComboBox>

        <TextBlock Text="Bounding Box (WGS84)" FontWeight="Bold" FontSize="14" Margin="0,0,0,10"/>

        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="100"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <TextBlock Grid.Row="0" Grid.Column="0" Text="Nord (max Lat):" VerticalAlignment="Center" Margin="0,4"/>
            <TextBox Grid.Row="0" Grid.Column="1" x:Name="NorthBox" Text="51.7" Margin="0,4"/>

            <TextBlock Grid.Row="1" Grid.Column="0" Text="Süd (min Lat):" VerticalAlignment="Center" Margin="0,4"/>
            <TextBox Grid.Row="1" Grid.Column="1" x:Name="SouthBox" Text="49.4" Margin="0,4"/>

            <TextBlock Grid.Row="2" Grid.Column="0" Text="Ost (max Lon):" VerticalAlignment="Center" Margin="0,4"/>
            <TextBox Grid.Row="2" Grid.Column="1" x:Name="EastBox" Text="10.3" Margin="0,4"/>

            <TextBlock Grid.Row="3" Grid.Column="0" Text="West (min Lon):" VerticalAlignment="Center" Margin="0,4"/>
            <TextBox Grid.Row="3" Grid.Column="1" x:Name="WestBox" Text="7.8" Margin="0,4"/>
        </Grid>

        <TextBlock Text="Zoom-Stufen" FontWeight="Bold" FontSize="14" Margin="0,14,0,6"/>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="100"/>
                <ColumnDefinition Width="80"/>
                <ColumnDefinition Width="30"/>
                <ColumnDefinition Width="80"/>
            </Grid.ColumnDefinitions>
            <TextBlock Grid.Column="0" Text="Min / Max Zoom:" VerticalAlignment="Center"/>
            <TextBox Grid.Column="1" x:Name="MinZoomBox" Text="1" TextChanged="ZoomChanged"/>
            <TextBlock Grid.Column="2" Text=" – " VerticalAlignment="Center" HorizontalAlignment="Center"/>
            <TextBox Grid.Column="3" x:Name="MaxZoomBox" Text="14" TextChanged="ZoomChanged"/>
        </Grid>

        <TextBlock x:Name="EstimateText" Text="Geschätzte Tiles: –" Margin="0,10,0,4" FontStyle="Italic" Foreground="Gray"/>

        <ProgressBar x:Name="DownloadProgress" Height="20" Minimum="0" Maximum="100" Value="0" Margin="0,0,0,4"/>
        <TextBlock x:Name="StatusText" Text="" FontSize="11"/>

        <StackPanel Orientation="Horizontal" Margin="0,14,0,0" HorizontalAlignment="Right">
            <Button x:Name="StartButton" Content="Download starten" Margin="0,0,10,0" Click="Start_Click"/>
            <Button x:Name="CancelButton" Content="Abbrechen" IsEnabled="False" Click="Cancel_Click"/>
        </StackPanel>
    </StackPanel>
</Window>
